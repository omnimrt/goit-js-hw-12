{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst fetchPicturesForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst userInput = document.querySelector('input');\nconst containerDiv = document.querySelector('.container');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nfunction getGalleryItemHeight() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const rect = galleryItem.getBoundingClientRect();\n  return rect.height;\n}\n\n// Controls the group number\nlet page = 1;\n// Controls the number of items in the group\nlet per_page = 40;\n\n// Function to show the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  containerDiv.append(loader);\n};\n\n// Function to hide the loader\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\n// Додано функцію для відображення кнопки \"Load more\"\nconst showLoadMoreButton = () => {\n  const loadMoreBtn = document.querySelector('.btn-load');\n  loadMoreBtn.style.display = 'block';\n};\n\n// Додано функцію для приховання кнопки \"Load more\"\nconst hideLoadMoreButton = () => {\n  const loadMoreBtn = document.querySelector('.btn-load');\n  loadMoreBtn.style.display = 'none';\n};\n\nasync function fetchPhotos() {\n  const params = new URLSearchParams({\n    page: page,\n    per_page: per_page,\n  });\n  const apiKey = '41249104-77dc8b1e0563744cb8297ef15';\n  const query = userInput.value;\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`\n  );\n  return response.data;\n}\n\nfunction renderPhotos(data) {\n  const markup = data.hits\n    .map(data => {\n      return `<li class=\"gallery-item\"><a href=\"${data.webformatURL}\">\n            <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n            <p><b>Likes: </b>${data.likes}</p>\n            <p><b>Views: </b>${data.views}</p>\n            <p><b>Comments: </b>${data.comments}</p>\n            <p><b>Downloads: </b>${data.downloads}</p>\n            </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('afterbegin', markup);\n  const lightbox = new SimpleLightbox('.gallery a', options);\n  lightbox.on('show.simplelightbox');\n  lightbox.refresh();\n}\n\nfetchPicturesForm.addEventListener('submit', async e => {\n  showLoader();\n  e.preventDefault(); // Prevent the default form submission behavior\n  gallery.innerHTML = '';\n\n  try {\n    const photos = await fetchPhotos();\n    renderPhotos(photos);\n    fetchPicturesForm.reset();\n    hideLoader();\n    showLoadMoreButton();\n    page += 1;\n\n    // Прокрутка сторінки на дві висоти карточки галереї\n    const galleryItemHeight = getGalleryItemHeight();\n    window.scrollBy(0, galleryItemHeight * 2);\n\n    if (photos.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        backgroundColor: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoadMoreButton();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n  try {\n    const photos = await fetchPhotos();\n    renderPhotos(photos);\n    hideLoader();\n    page += 1;\n\n    // Прокрутка сторінки на дві висоти карточки галереї\n    const galleryItemHeight = getGalleryItemHeight();\n    window.scrollBy(0, galleryItemHeight * 2);\n\n    if (gallery.children.length > photos.totalHits) {\n      iziToast.warning({\n        title: '',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n    hideLoadMoreButton();\n  }\n});\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\n"],"names":["fetchPicturesForm","gallery","userInput","containerDiv","loadMoreBtn","getGalleryItemHeight","page","per_page","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","fetchPhotos","apiKey","query","axios","renderPhotos","data","markup","lightbox","SimpleLightbox","options","photos","galleryItemHeight","iziToast","error"],"mappings":"owBAYA,MAAMA,EAAoB,SAAS,cAAc,OAAO,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAe,SAAS,cAAc,YAAY,EAClDC,EAAc,SAAS,cAAc,WAAW,EAEtD,SAASC,GAAuB,CAG9B,OAFoB,SAAS,cAAc,eAAe,EACjC,wBACb,MACd,CAGA,IAAIC,EAAO,EAEPC,EAAW,GAGf,MAAMC,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BN,EAAa,OAAOM,CAAM,CAC5B,EAGMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAGME,EAAqB,IAAM,CAC/B,MAAMP,EAAc,SAAS,cAAc,WAAW,EACtDA,EAAY,MAAM,QAAU,OAC9B,EAGMQ,EAAqB,IAAM,CAC/B,MAAMR,EAAc,SAAS,cAAc,WAAW,EACtDA,EAAY,MAAM,QAAU,MAC9B,EAEA,eAAeS,GAAc,CACZ,IAAI,gBAAgB,CACjC,KAAMP,EACN,SAAUC,CACd,CAAG,EACD,MAAMO,EAAS,qCACTC,EAAQb,EAAU,MAMxB,OALiB,MAAMc,EAAM,IAC3B,gCAAgCF,OAAY,mBAC1CC,CACD,kEAAiET,cAAiBC,GACvF,GACkB,IAClB,CAEA,SAASU,EAAaC,EAAM,CAC1B,MAAMC,EAASD,EAAK,KACjB,IAAIA,GACI,qCAAqCA,EAAK;AAAA,8CACTA,EAAK,sBAAsBA,EAAK;AAAA,+BAC/CA,EAAK;AAAA,+BACLA,EAAK;AAAA,kCACFA,EAAK;AAAA,mCACJA,EAAK;AAAA,kBAEnC,EACA,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,aAAckB,CAAM,EAC/C,MAAMC,EAAW,IAAIC,EAAe,aAAcC,CAAO,EACzDF,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,CAClB,CAEApB,EAAkB,iBAAiB,SAAU,MAAM,GAAK,CACtDQ,IACA,EAAE,eAAc,EAChBP,EAAQ,UAAY,GAEpB,GAAI,CACF,MAAMsB,EAAS,MAAMV,IACrBI,EAAaM,CAAM,EACnBvB,EAAkB,MAAK,EACvBU,IACAC,IACAL,GAAQ,EAGR,MAAMkB,EAAoBnB,IAC1B,OAAO,SAAS,EAAGmB,EAAoB,CAAC,EAEpCD,EAAO,KAAK,SAAW,IACzBE,EAAS,MAAM,CACb,MAAO,GACP,gBAAiB,UACjB,QACE,0EACV,CAAO,EACDb,IAEH,OAAQc,EAAP,CACA,QAAQ,IAAIA,CAAK,EACjBd,GACD,CACH,CAAC,EAEDR,EAAY,iBAAiB,QAAS,SAAY,CAChDI,IACA,GAAI,CACF,MAAMe,EAAS,MAAMV,IACrBI,EAAaM,CAAM,EACnBb,IACAJ,GAAQ,EAGR,MAAMkB,EAAoBnB,IAC1B,OAAO,SAAS,EAAGmB,EAAoB,CAAC,EAEpCvB,EAAQ,SAAS,OAASsB,EAAO,YACnCE,EAAS,QAAQ,CACf,MAAO,GACP,QACE,+DACV,CAAO,EACDb,IAEH,OAAQc,EAAP,CACA,QAAQ,IAAIA,CAAK,EACjBhB,IACAE,GACD,CACH,CAAC,EAED,MAAMU,EAAU,CACd,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,GACb"}